<!-- Il form si usa sia per la creazione che per la modifica di un articolo. -->
{% extends "layouts/base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>{{ view.object.pk|yesno:"Edit Article,Add New Article" }}</h2>
  
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="row">
      <!-- Colonna sinistra -->
      <div class="col-md-8">
        <!-- Titolo -->
        <div class="mb-3">
          <label for="{{ form.titolo.id_for_label }}" class="form-label">
            <strong>Titolo:</strong>
          </label>
          {{ form.titolo }}
          {% if form.titolo.errors %}
            <div class="text-danger">
              {% for error in form.titolo.errors %}
                <small>{{ error }}</small>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <!-- Autori -->
        <div class="mb-3">
          <label for="{{ form.autori.id_for_label }}" class="form-label">
            <strong>Autori:</strong>
          </label>
          {{ form.autori }}
          {% if form.autori.errors %}
            <div class="text-danger">
              {% for error in form.autori.errors %}
                <small>{{ error }}</small>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <!-- Tag -->
        <div class="mb-3">
          <label for="{{ form.tag.id_for_label }}" class="form-label">
            <strong>Tag: si scrivono con #</strong>
          </label>
          {{ form.tag }}
          {% if form.tag.errors %}
            <div class="text-danger">
              {% for error in form.tag.errors %}
                <small>{{ error }}</small>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <!-- Immagine -->
        <div class="mb-3">
          <label for="{{ form.immagine.id_for_label }}" class="form-label">
            <strong>Immagine: &lt;tasto per caricare un'immagine&gt;</strong>
          </label>
          {{ form.immagine }}
          {% if form.immagine.errors %}
            <div class="text-danger">
              {% for error in form.immagine.errors %}
                <small>{{ error }}</small>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <!-- Testo -->
        <div class="mb-4">
          <label for="{{ form.testo.id_for_label }}" class="form-label">
            <strong>Testo:</strong>
          </label>
          {{ form.testo }}
          {% if form.testo.errors %}
            <div class="text-danger">
              {% for error in form.testo.errors %}
                <small>{{ error }}</small>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Colonna destra - Pulsante Pubblica -->
      <div class="col-md-4">
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-primary btn-lg px-4">
            Pubblica
          </button>
        </div>
      </div>
    </div>

    <!-- Pulsante Cancel nella parte inferiore -->
    <div class="row mt-3">
      <div class="col-12">
        <a href="{% url 'book-list' %}" class="btn btn-secondary">Cancel</a>
      </div>
    </div>
  </form>
</div>

<style>
/* Stili aggiuntivi per migliorare l'aspetto del form */
.form-control, .form-select {
    border-radius: 4px;
    border: 1px solid #ddd;
    padding: 8px 12px;
}

textarea.form-control {
    min-height: 200px;
    resize: vertical;
}

.btn-primary {
    background-color: #007bff;
    border-color: #007bff;
}

.form-label {
    font-weight: normal;
    margin-bottom: 5px;
}
</style>
{% endblock %}